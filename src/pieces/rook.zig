const std = @import("std");
const testing = @import("testing.zig");
const util = @import("util.zig");

const vertical: u64 = 0b10000000_10000000_10000000_10000000_10000000_10000000_10000000_10000000;
const horizontal: u64 = 0b11111111_00000000_00000000_00000000_00000000_00000000_00000000_00000000;
pub fn generate_rook_moves(rook_pos: u6) u64 {
    const col = rook_pos & 7;
    const entire_col: u64 = vertical >> col;

    return util.strip_player_pos(entire_col, rook_pos);
}

pub fn generate_with_enemy(rook_pos: u6, enemies: u64) u64 {
    const col = rook_pos & 7;
    const row: u3 = @intCast(rook_pos >> 3);
    // Move entire_col to the same column as rook_pos
    var entire_col: u64 = vertical >> col;
    entire_col <<= 8 * (rook_pos >> row);

    for (0..8) |_| {
        if (entire_col & enemies == 0) {
            break;
        }

        // entire_col <<= 8;
    }

    // return util.strip_player_pos(entire_col, rook_pos);
    return entire_col;
}
test generate_rook_moves {
    std.testing.log_level = .debug;

    try testing.expectBitBoardArray(
        [64]u64{
            0b01111111_10000000_10000000_10000000_10000000_10000000_10000000_10000000,
            0b10111111_01000000_01000000_01000000_01000000_01000000_01000000_01000000,
            0b11011111_00100000_00100000_00100000_00100000_00100000_00100000_00100000,
            0b11101111_00010000_00010000_00010000_00010000_00010000_00010000_00010000,
            0b11110111_00001000_00001000_00001000_00001000_00001000_00001000_00001000,
            0b11111011_00000100_00000100_00000100_00000100_00000100_00000100_00000100,
            0b11111101_00000010_00000010_00000010_00000010_00000010_00000010_00000010,
            0b11111110_00000001_00000001_00000001_00000001_00000001_00000001_00000001,
            0b10000000_01111111_10000000_10000000_10000000_10000000_10000000_10000000,
            0b01000000_10111111_01000000_01000000_01000000_01000000_01000000_01000000,
            0b00100000_11011111_00100000_00100000_00100000_00100000_00100000_00100000,
            0b00010000_11101111_00010000_00010000_00010000_00010000_00010000_00010000,
            0b00001000_11110111_00001000_00001000_00001000_00001000_00001000_00001000,
            0b00000100_11111011_00000100_00000100_00000100_00000100_00000100_00000100,
            0b00000010_11111101_00000010_00000010_00000010_00000010_00000010_00000010,
            0b00000001_11111110_00000001_00000001_00000001_00000001_00000001_00000001,
            0b10000000_10000000_01111111_10000000_10000000_10000000_10000000_10000000,
            0b01000000_01000000_10111111_01000000_01000000_01000000_01000000_01000000,
            0b00100000_00100000_11011111_00100000_00100000_00100000_00100000_00100000,
            0b00010000_00010000_11101111_00010000_00010000_00010000_00010000_00010000,
            0b00001000_00001000_11110111_00001000_00001000_00001000_00001000_00001000,
            0b00000100_00000100_11111011_00000100_00000100_00000100_00000100_00000100,
            0b00000010_00000010_11111101_00000010_00000010_00000010_00000010_00000010,
            0b00000001_00000001_11111110_00000001_00000001_00000001_00000001_00000001,
            0b10000000_10000000_10000000_01111111_10000000_10000000_10000000_10000000,
            0b01000000_01000000_01000000_10111111_01000000_01000000_01000000_01000000,
            0b00100000_00100000_00100000_11011111_00100000_00100000_00100000_00100000,
            0b00010000_00010000_00010000_11101111_00010000_00010000_00010000_00010000,
            0b00001000_00001000_00001000_11110111_00001000_00001000_00001000_00001000,
            0b00000100_00000100_00000100_11111011_00000100_00000100_00000100_00000100,
            0b00000010_00000010_00000010_11111101_00000010_00000010_00000010_00000010,
            0b00000001_00000001_00000001_11111110_00000001_00000001_00000001_00000001,
            0b10000000_10000000_10000000_10000000_01111111_10000000_10000000_10000000,
            0b01000000_01000000_01000000_01000000_10111111_01000000_01000000_01000000,
            0b00100000_00100000_00100000_00100000_11011111_00100000_00100000_00100000,
            0b00010000_00010000_00010000_00010000_11101111_00010000_00010000_00010000,
            0b00001000_00001000_00001000_00001000_11110111_00001000_00001000_00001000,
            0b00000100_00000100_00000100_00000100_11111011_00000100_00000100_00000100,
            0b00000010_00000010_00000010_00000010_11111101_00000010_00000010_00000010,
            0b00000001_00000001_00000001_00000001_11111110_00000001_00000001_00000001,
            0b10000000_10000000_10000000_10000000_10000000_01111111_10000000_10000000,
            0b01000000_01000000_01000000_01000000_01000000_10111111_01000000_01000000,
            0b00100000_00100000_00100000_00100000_00100000_11011111_00100000_00100000,
            0b00010000_00010000_00010000_00010000_00010000_11101111_00010000_00010000,
            0b00001000_00001000_00001000_00001000_00001000_11110111_00001000_00001000,
            0b00000100_00000100_00000100_00000100_00000100_11111011_00000100_00000100,
            0b00000010_00000010_00000010_00000010_00000010_11111101_00000010_00000010,
            0b00000001_00000001_00000001_00000001_00000001_11111110_00000001_00000001,
            0b10000000_10000000_10000000_10000000_10000000_10000000_01111111_10000000,
            0b01000000_01000000_01000000_01000000_01000000_01000000_10111111_01000000,
            0b00100000_00100000_00100000_00100000_00100000_00100000_11011111_00100000,
            0b00010000_00010000_00010000_00010000_00010000_00010000_11101111_00010000,
            0b00001000_00001000_00001000_00001000_00001000_00001000_11110111_00001000,
            0b00000100_00000100_00000100_00000100_00000100_00000100_11111011_00000100,
            0b00000010_00000010_00000010_00000010_00000010_00000010_11111101_00000010,
            0b00000001_00000001_00000001_00000001_00000001_00000001_11111110_00000001,
            0b10000000_10000000_10000000_10000000_10000000_10000000_10000000_01111111,
            0b01000000_01000000_01000000_01000000_01000000_01000000_01000000_10111111,
            0b00100000_00100000_00100000_00100000_00100000_00100000_00100000_11011111,
            0b00010000_00010000_00010000_00010000_00010000_00010000_00010000_11101111,
            0b00001000_00001000_00001000_00001000_00001000_00001000_00001000_11110111,
            0b00000100_00000100_00000100_00000100_00000100_00000100_00000100_11111011,
            0b00000010_00000010_00000010_00000010_00000010_00000010_00000010_11111101,
            0b00000001_00000001_00000001_00000001_00000001_00000001_00000001_11111110,
        },
        generate_rook_moves,
    );
}
